# Eniolabi Service Hub - Root Context

## Project Overview
A Next.js 14 service monitoring application with real-time updates, built for monitoring 12+ services across the eniolabi.com infrastructure.

## Architecture
- **Frontend**: Next.js 14 (App Router), TypeScript, Tailwind CSS
- **Backend**: tRPC, NextAuth.js, Prisma ORM
- **Database**: PostgreSQL (users, services, status history)
- **Cache**: Redis (real-time updates, sessions)
- **Real-time**: Server-Sent Events with Redis pub/sub
- **Email**: Nodemailer with HTML templates

## Key Features
- Role-based access (ADMIN/POWER_USER/GUEST)
- Real-time service monitoring with status cards
- Apple Human Interface Guidelines design system
- Dark/light theme support
- Email notification system
- Admin panel for user/service management

## Technologies
- Next.js 14, TypeScript, Tailwind CSS
- tRPC, NextAuth.js, Prisma, PostgreSQL, Redis
- Docker Compose for infrastructure

## File Structure
```
├── src/app/          # Next.js App Router pages
├── src/components/   # React components
├── src/server/       # tRPC server code  
├── src/lib/          # Utilities
├── prisma/           # Database schema
├── public/asset/     # Service icons (SVGs)
└── docker-compose.yml
```

## Current Issues - RESOLVED ✅
- ~~Redis authentication error (NOAUTH)~~ - FIXED with .env.local configuration
- ~~Service icons were missing~~ - FIXED by moving SVGs to public/asset/
- ~~Need proper environment configuration~~ - FIXED with .env.local file

## Recent Changes
- Fixed Redis authentication with proper environment variables
- Moved SVG icons to public/asset/ directory for proper loading
- Created comprehensive .env.local with all required configurations
- Moved waffle menu to top-right corner
- Added service SVG logos to cards
- Implemented dark/light theme system
- Removed admin credentials from login page

## Configuration Files
- `.env.local` - Contains all environment variables (DB, Redis, NextAuth, Email)
- `.env.example` - Template file for environment configuration
- `docker-compose.yml` - PostgreSQL + Redis with authentication
- `public/asset/` - Service SVG icons (homeassistant, portainer, n8n, etc.)

## Production Email Configuration
For production deployment, update these environment variables in `.env.local`:
```env
# Gmail SMTP (recommended for production)
EMAIL_SERVER_HOST="smtp.gmail.com"
EMAIL_SERVER_PORT="587"
EMAIL_SERVER_USER="your-email@gmail.com"
EMAIL_SERVER_PASSWORD="your-app-password"  # Use App Password, not regular password
EMAIL_FROM="Service Hub <noreply@yourdomain.com>"

# Alternative SMTP providers:
# SendGrid: smtp.sendgrid.net:587
# Mailgun: smtp.mailgun.org:587
# AWS SES: email-smtp.region.amazonaws.com:587
```

**Important Notes:**
- For Gmail, use App Passwords, not regular passwords
- Enable 2FA on Gmail before generating App Password
- Test email configuration with development SMTP first (Ethereal Email)

## Working Features
- Redis real-time updates (authentication fixed)
- Service monitoring with brand logos
- Dark/light theme switching
- Role-based access control
- Email notification system