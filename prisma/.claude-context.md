# Prisma Directory Context

## Purpose
Database schema, migrations, and seed data for PostgreSQL database.

## Structure
```
prisma/
├── schema.prisma     # Database schema definition
├── seed.ts          # Initial data seeding script
└── migrations/      # Database migration files (auto-generated)
```

## Database Models

### Core Models
- **User**: Authentication, roles, preferences
  - `id`, `username`, `email`, `name`, `passwordHash`
  - `role` (ADMIN/POWER_USER/GUEST)
  - `isActive`, `mustChangePassword`
  - Relationships: NotificationPreference, Note

- **Service**: Monitored services configuration
  - `id`, `name`, `url`, `healthEndpoint`
  - `category`, `icon`, `description`
  - `timeoutSeconds`, `isActive`
  - Relationships: ServiceStatus (1:many)

- **ServiceStatus**: Historical status records
  - `id`, `serviceId`, `status`, `responseTime`
  - `errorMessage`, `statusCode`, `checkedAt`

- **NotificationPreference**: User email settings
  - `userId`, `emailEnabled`, `statusChanges`
  - `onlineToOffline`, `offlineToOnline`
  - `errorAlerts`, `warningAlerts`, `systemAlerts`

### NextAuth.js Models
- **Account**: OAuth account linking
- **Session**: User sessions
- **VerificationToken**: Email verification

## Seed Data
- Default admin user (admin/[CONFIGURE_YOUR_SECURE_PASSWORD])
- 12 pre-configured services:
  - Home Assistant, Portainer, n8n, Plex
  - Node-RED, Uptime Kuma, Zigbee2MQTT, etc.
- Default notification preferences

## Database Configuration
- PostgreSQL as primary database
- Connection via DATABASE_URL environment variable
- Prisma Client for type-safe database access